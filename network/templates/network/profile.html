<h1>{{ user_profile.username }}'s Profile</h1>
<p>Followers: {{ followers }}</p>
<p>Following: {{ following }}</p>

{% if user != user_profile %}
<form method="post" action="{% url 'profile' username=user_profile.username %}">
  {% csrf_token %}
  <button type="submit" name="follow">
    {% if is_following %}Unfollow{% else %}Follow{% endif %}
  </button>
</form>
{% endif %}

{% for post in posts %}
<div class="post" id="post-{{ post.id }}">
    <h3>{{ post.user.username }}</h3>
    <div id="content-{{ post.id }}">
        <p>{{ post.post }}</p> <!-- Make sure to use the correct field name for the post content -->
    </div>
    <p>Posted on: {{ post.timestamp }}</p>
    <p>Likes: {{ post.likes.count }}</p> <!-- Assuming 'likes' is a ManyToManyField -->
    
    {% if user == post.user %}
    <button onclick="editPost('{{ post.id }}')">Edit</button>
    <button onclick="toggleLike('{{ post.id }}')">{{ post.likes.count }} Likes</button>
    {% endif %}
</div>
{% endfor %}

<div class="pagination">
    {% if posts.has_previous %}
        <a href="?page=1">First</a>
        <a href="?page={{ posts.previous_page_number }}">Previous</a>
    {% endif %}
    <span class="current">
        Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
    </span>
    {% if posts.has_next %}
        <a href="?page={{ posts.next_page_number }}">Next</a>
        <a href="?page={{ posts.paginator.num_pages }}">Last</a>
    {% endif %}
</div>
